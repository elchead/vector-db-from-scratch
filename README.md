# Vector DB

A FastAPI-based vector database that lets you store, index, and query documents using k-NN similarity search over chunked embeddings. Built from scratch with custom indexing logicâ€”no FAISS, no Pinecone.

### Indexing

- `BruteForceIndex`: Exact cosine similarity using numpy
- `LSHIndex`: LSH-based cosine similarity using numpy



## TODOs

- [ ] finish LSH implementation
- [ ] add concurrency tests and lock handling in library_service
- [ ] centralize 404/400/500 responses with fastapi.exception_handlers
- [ ] improve error handling
- [ ] refactor tests
- [ ] use dependency injection

---

## Local Development Setup

### 1. Install `uv`

If you don't have `uv` installed, you can install it with:

```bash
curl -Ls https://astral.sh/uv/install.sh | sh
```

Or, if you use Homebrew:

```bash
brew install uv
```

### 2. Install dependencies

From the project root, run:

```bash
uv pip install -r pyproject.toml
uv pip install -e .
```

Or, to add new dependencies (for example, FastAPI):

```bash
uv add fastapi
```

### 3. Set up environment variables

Copy or create your `.env` file:

```bash
cp .env.example .env
echo "COHERE_API_KEY=your_key_here" > .env
```

### 4. Run the API locally

```bash
uv run -- fastapi dev src/main.py
```

Or, if you want to run tests:

```bash
uv run pytest
```

---

### How to Run with Docker

### 1. Clone the repo

```bash
git clone https://github.com/yourname/vector-db-challenge.git
cd vector-db-challenge
````

### 2. Set up `.env`

```env
COHERE_API_KEY=your_key_here
```

### 3. Run with Docker

```bash
docker build -t vector-db .
docker run -p 8000:8000 --env-file .env vector-db
```

### 4. Access the API

Docs auto-generated by FastAPI:
`http://localhost:8000/docs`

---

## Running Tests

```bash
pytest
```
